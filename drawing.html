<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>Maria's Drawing Canvas! 🎨</title>
    <style>
        body {
            margin: 0;
            padding: 20px;
            background: linear-gradient(45deg, #FFB6C1, #FFC0CB, #FFCCCB, #F0F8FF);
            font-family: 'Comic Sans MS', cursive;
            animation: backgroundShift 10s ease-in-out infinite;
            /* Prevent scrolling and zooming on mobile */
            touch-action: manipulation;
            overflow-x: hidden;
            -webkit-user-select: none;
            -moz-user-select: none;
            -ms-user-select: none;
            user-select: none;
        }

        @keyframes backgroundShift {
            0%, 100% { background: linear-gradient(45deg, #FFB6C1, #FFC0CB, #FFCCCB, #F0F8FF); }
            50% { background: linear-gradient(45deg, #98FB98, #87CEEB, #DDA0DD, #FFE4E1); }
        }

        .drawing-container {
            display: flex;
            gap: 20px;
            max-width: 1200px;
            margin: 0 auto;
        }

        .controls-panel {
            background: rgba(255,255,255,0.9);
            padding: 20px;
            border-radius: 15px;
            box-shadow: 0 8px 20px rgba(0,0,0,0.2);
            width: 300px;
            height: fit-content;
        }

        .canvas-area {
            flex: 1;
        }

        .canvas-container {
            background: white;
            border-radius: 15px;
            padding: 20px;
            box-shadow: 0 8px 20px rgba(0,0,0,0.2);
            position: relative;
            margin-bottom: 20px;
        }

        #drawingCanvas {
            border: 3px solid #ff1493;
            border-radius: 10px;
            cursor: crosshair;
            background: white;
            display: block;
            margin: 0 auto;
            /* Prevent touch scrolling on canvas */
            touch-action: none;
            -webkit-touch-callout: none;
            -webkit-user-select: none;
            -khtml-user-select: none;
            -moz-user-select: none;
            -ms-user-select: none;
            user-select: none;
        }

        .control-group {
            background: rgba(255,255,255,0.9);
            padding: 15px;
            border-radius: 10px;
            box-shadow: 0 4px 10px rgba(0,0,0,0.1);
            margin-bottom: 15px;
        }

        .control-group h3 {
            color: #ff1493;
            margin-bottom: 10px;
            font-size: 1.2em;
            text-align: center;
        }

        .color-palette {
            display: grid;
            grid-template-columns: repeat(4, 1fr);
            gap: 8px;
        }

        .color-option {
            width: 40px;
            height: 40px;
            border-radius: 50%;
            border: 3px solid transparent;
            cursor: pointer;
            transition: all 0.3s ease;
            margin: 0 auto;
        }

        .color-option:hover {
            transform: scale(1.1);
            box-shadow: 0 4px 8px rgba(0,0,0,0.3);
        }

        .color-option.selected {
            border-color: #ff1493;
            transform: scale(1.2);
            box-shadow: 0 6px 12px rgba(255,20,147,0.5);
        }

        .sticker-option {
            width: 40px;
            height: 40px;
            border-radius: 50%;
            border: 3px solid transparent;
            cursor: pointer;
            transition: all 0.3s ease;
            margin: 0 auto;
            font-size: 1.8em;
            display: flex;
            align-items: center;
            justify-content: center;
            background: linear-gradient(45deg, #FFB6C1, #FFF0F5);
        }

        .sticker-option:hover {
            transform: scale(1.1);
            box-shadow: 0 4px 8px rgba(0,0,0,0.3);
        }

        .sticker-option.selected {
            border-color: #ff1493;
            transform: scale(1.2);
            box-shadow: 0 6px 12px rgba(255,20,147,0.5);
            background: linear-gradient(45deg, #FF69B4, #FFB6C1);
        }

        .brush-sizes {
            display: flex;
            gap: 8px;
            flex-wrap: wrap;
            justify-content: center;
        }

        .brush-option {
            padding: 8px 12px;
            background: #ff9a9e;
            color: white;
            border: none;
            border-radius: 20px;
            cursor: pointer;
            font-weight: bold;
            transition: all 0.3s ease;
            font-size: 0.9em;
        }

        .brush-option:hover {
            background: #ff1493;
            transform: scale(1.05);
        }

        .brush-option.selected {
            background: #ff1493;
            box-shadow: 0 0 10px rgba(255,20,147,0.5);
        }

        /* Super cute animal styles */
        .cute-canvas-animal {
            font-size: 35px;
            transition: all 0.3s ease;
            background: linear-gradient(45deg, #FFB6C1, #FFF0F5, #FFCCCB);
            border-radius: 50%;
            width: 50px;
            height: 50px;
            display: flex;
            align-items: center;
            justify-content: center;
            border: 4px solid #FF69B4;
            box-shadow: 0 6px 12px rgba(255,105,180,0.4), 0 0 20px rgba(255,182,193,0.3);
            animation: superCuteFloat 3s ease-in-out infinite;
            filter: drop-shadow(0 0 10px rgba(255,192,203,0.8));
            cursor: pointer;
        }

        .cute-canvas-animal:hover {
            transform: scale(1.3) rotate(10deg);
            filter: drop-shadow(0 8px 16px rgba(0,0,0,0.4));
            animation: animalBounce 0.5s ease-in-out;
        }

        @keyframes superCuteFloat {
            0%, 100% { transform: translateY(0px) scale(1); }
            50% { transform: translateY(-8px) scale(1.05); }
        }

        @keyframes animalBounce {
            0% { opacity: 0; transform: translateX(-50%) scale(0.5) rotate(-5deg); }
            20% { opacity: 1; transform: translateX(-50%) scale(1.1) rotate(2deg); }
            40% { transform: translateX(-50%) scale(0.95) rotate(-1deg); }
            60% { transform: translateX(-50%) scale(1.05) rotate(1deg); }
            80% { transform: translateX(-50%) scale(1) rotate(0deg); }
            100% { opacity: 1; transform: translateX(-50%) scale(1) rotate(0deg); }
        }

        .title {
            text-align: center;
            color: #ff1493;
            font-size: 2.5em;
            margin-bottom: 20px;
            text-shadow: 2px 2px 4px rgba(0,0,0,0.3);
            animation: titlePulse 2s ease-in-out infinite;
        }

        @keyframes titlePulse {
            0%, 100% { transform: scale(1); }
            50% { transform: scale(1.05); }
        }

        .message-bubble {
            position: fixed;
            top: 20%;
            left: 50%;
            transform: translateX(-50%);
            background: linear-gradient(45deg, #FFB6C1, #FFF0F5);
            padding: 25px 35px;
            border-radius: 30px;
            border: 5px solid #FF69B4;
            color: #8B4513;
            font-size: 1.5em;
            font-weight: bold;
            z-index: 1000;
            box-shadow: 0 12px 24px rgba(0,0,0,0.4);
            animation: animalBounce 3s ease-in-out;
            text-align: center;
            font-family: 'Comic Sans MS', cursive;
            max-width: 400px;
            display: none;
        }

        /* ON/OFF Button Styles */
        .eating-control {
            text-align: center;
            margin: 10px 0;
        }

        #animalEatingBtn {
            background: #32CD32;
            font-size: 1em;
            padding: 10px 15px;
        }

        #animalEatingBtn.off {
            background: #ff6b6b;
        }

        /* Gallery Popup Styles */
        .gallery-popup {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0,0,0,0.8);
            z-index: 1000;
            display: none;
            overflow-y: auto;
        }

        .gallery-content {
            background: linear-gradient(45deg, #FFB6C1, #FFF0F5);
            margin: 50px auto;
            padding: 30px;
            border-radius: 20px;
            max-width: 900px;
            border: 5px solid #FF69B4;
            box-shadow: 0 20px 40px rgba(0,0,0,0.3);
        }

        .gallery-header {
            text-align: center;
            color: #FF1493;
            font-size: 2.5em;
            margin-bottom: 20px;
            text-shadow: 2px 2px 4px rgba(0,0,0,0.3);
        }

        .close-gallery {
            position: absolute;
            top: 60px;
            right: 60px;
            background: #ff6b6b;
            color: white;
            border: none;
            border-radius: 50%;
            width: 50px;
            height: 50px;
            font-size: 1.5em;
            cursor: pointer;
            font-weight: bold;
        }

        .drawings-grid {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(200px, 1fr));
            gap: 20px;
            margin-top: 20px;
        }

        .drawing-item {
            background: white;
            border-radius: 15px;
            padding: 15px;
            box-shadow: 0 8px 16px rgba(0,0,0,0.2);
            text-align: center;
            border: 3px solid #FFB6C1;
        }

        .drawing-item img {
            width: 100%;
            height: 150px;
            object-fit: contain;
            border-radius: 10px;
            background: white;
        }

        .drawing-title {
            color: #FF1493;
            font-weight: bold;
            margin-top: 10px;
            font-size: 1.1em;
        }

        .delete-drawing {
            background: #ff6b6b;
            color: white;
            border: none;
            border-radius: 15px;
            padding: 5px 10px;
            margin-top: 8px;
            cursor: pointer;
            font-size: 0.9em;
        }

        .save-popup {
            position: fixed;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            background: linear-gradient(45deg, #FFB6C1, #FFF0F5);
            padding: 30px;
            border-radius: 20px;
            border: 5px solid #FF69B4;
            z-index: 1001;
            display: none;
            box-shadow: 0 20px 40px rgba(0,0,0,0.5);
        }

        .save-input {
            padding: 10px;
            border: 3px solid #FF69B4;
            border-radius: 10px;
            font-size: 1.2em;
            margin: 10px;
            text-align: center;
            font-family: 'Comic Sans MS', cursive;
        }
    </style>
</head>
<body>
    <div class="title">🎨 Maria's Magical Drawing Canvas! 🎨</div>
    
    <div class="drawing-container">
        <!-- Controls Panel -->
        <div class="controls-panel">
            <div class="control-group">
                <h3>🌸 Pastel Colors</h3>
                <div class="color-palette">
                    <!-- Soft Pastel Colors -->
                    <div class="color-option" style="background-color: #FFB6C1;" onclick="selectColor('#FFB6C1')"></div>
                    <div class="color-option" style="background-color: #FFC0CB;" onclick="selectColor('#FFC0CB')"></div>
                    <div class="color-option" style="background-color: #FFCCCB;" onclick="selectColor('#FFCCCB')"></div>
                    <div class="color-option" style="background-color: #FFE4E1;" onclick="selectColor('#FFE4E1')"></div>
                    <div class="color-option" style="background-color: #FFEFD5;" onclick="selectColor('#FFEFD5')"></div>
                    <div class="color-option" style="background-color: #FFFF99;" onclick="selectColor('#FFFF99')"></div>
                    <div class="color-option" style="background-color: #F0E68C;" onclick="selectColor('#F0E68C')"></div>
                    <div class="color-option" style="background-color: #FFFACD;" onclick="selectColor('#FFFACD')"></div>
                    <div class="color-option" style="background-color: #90EE90;" onclick="selectColor('#90EE90')"></div>
                    <div class="color-option" style="background-color: #98FB98;" onclick="selectColor('#98FB98')"></div>
                    <div class="color-option" style="background-color: #F0FFF0;" onclick="selectColor('#F0FFF0')"></div>
                    <div class="color-option" style="background-color: #AFEEEE;" onclick="selectColor('#AFEEEE')"></div>
                    <div class="color-option" style="background-color: #87CEEB;" onclick="selectColor('#87CEEB')"></div>
                    <div class="color-option" style="background-color: #ADD8E6;" onclick="selectColor('#ADD8E6')"></div>
                    <div class="color-option" style="background-color: #B0E0E6;" onclick="selectColor('#B0E0E6')"></div>
                    <div class="color-option" style="background-color: #E0E6FF;" onclick="selectColor('#E0E6FF')"></div>
                    <div class="color-option" style="background-color: #DDA0DD;" onclick="selectColor('#DDA0DD')"></div>
                    <div class="color-option" style="background-color: #E6E6FA;" onclick="selectColor('#E6E6FA')"></div>
                    <div class="color-option" style="background-color: #D8BFD8;" onclick="selectColor('#D8BFD8')"></div>
                    <div class="color-option" style="background-color: #F5F5DC;" onclick="selectColor('#F5F5DC')"></div>
                </div>
            </div>

            <div class="control-group">
                <h3>🎨 Normal Colors</h3>
                <div class="color-palette">
                    <!-- Basic Colors -->
                    <div class="color-option selected" style="background-color: #000;" onclick="selectColor('#000')"></div>
                    <div class="color-option" style="background-color: #ffffff; border: 2px solid #ccc;" onclick="selectColor('#ffffff')"></div>
                    <div class="color-option" style="background-color: #808080;" onclick="selectColor('#808080')"></div>
                    <div class="color-option" style="background-color: #C0C0C0;" onclick="selectColor('#C0C0C0')"></div>
                    
                    <!-- Bright Colors -->
                    <div class="color-option" style="background-color: #ff0000;" onclick="selectColor('#ff0000')"></div>
                    <div class="color-option" style="background-color: #DC143C;" onclick="selectColor('#DC143C')"></div>
                    <div class="color-option" style="background-color: #B22222;" onclick="selectColor('#B22222')"></div>
                    <div class="color-option" style="background-color: #8B0000;" onclick="selectColor('#8B0000')"></div>
                    <div class="color-option" style="background-color: #FF69B4;" onclick="selectColor('#FF69B4')"></div>
                    <div class="color-option" style="background-color: #FF1493;" onclick="selectColor('#FF1493')"></div>
                    <div class="color-option" style="background-color: #ffa500;" onclick="selectColor('#ffa500')"></div>
                    <div class="color-option" style="background-color: #FF8C00;" onclick="selectColor('#FF8C00')"></div>
                    <div class="color-option" style="background-color: #FF6347;" onclick="selectColor('#FF6347')"></div>
                    <div class="color-option" style="background-color: #FF4500;" onclick="selectColor('#FF4500')"></div>
                    <div class="color-option" style="background-color: #ffff00;" onclick="selectColor('#ffff00')"></div>
                    <div class="color-option" style="background-color: #FFD700;" onclick="selectColor('#FFD700')"></div>
                    <div class="color-option" style="background-color: #00ff00;" onclick="selectColor('#00ff00')"></div>
                    <div class="color-option" style="background-color: #32CD32;" onclick="selectColor('#32CD32')"></div>
                    <div class="color-option" style="background-color: #228B22;" onclick="selectColor('#228B22')"></div>
                    <div class="color-option" style="background-color: #006400;" onclick="selectColor('#006400')"></div>
                    <div class="color-option" style="background-color: #0000ff;" onclick="selectColor('#0000ff')"></div>
                    <div class="color-option" style="background-color: #1E90FF;" onclick="selectColor('#1E90FF')"></div>
                    <div class="color-option" style="background-color: #4169E1;" onclick="selectColor('#4169E1')"></div>
                    <div class="color-option" style="background-color: #000080;" onclick="selectColor('#000080')"></div>
                    <div class="color-option" style="background-color: #00ffff;" onclick="selectColor('#00ffff')"></div>
                    <div class="color-option" style="background-color: #ff00ff;" onclick="selectColor('#ff00ff')"></div>
                    <div class="color-option" style="background-color: #800080;" onclick="selectColor('#800080')"></div>
                    <div class="color-option" style="background-color: #9370DB;" onclick="selectColor('#9370DB')"></div>
                    <div class="color-option" style="background-color: #4B0082;" onclick="selectColor('#4B0082')"></div>
                    <div class="color-option" style="background-color: #8B4513;" onclick="selectColor('#8B4513')"></div>
                    <div class="color-option" style="background-color: #A0522D;" onclick="selectColor('#A0522D')"></div>
                    <div class="color-option" style="background-color: #D2691E;" onclick="selectColor('#D2691E')"></div>
                </div>
            </div>

            <div class="control-group">
                <h3>🐱 Animal Stickers</h3>
                <div class="color-palette">
                    <div class="sticker-option" onclick="selectSticker('🐱')" title="Cat">🐱</div>
                    <div class="sticker-option" onclick="selectSticker('🐶')" title="Dog">🐶</div>
                    <div class="sticker-option" onclick="selectSticker('🐰')" title="Bunny">🐰</div>
                    <div class="sticker-option" onclick="selectSticker('🐼')" title="Panda">🐼</div>
                    <div class="sticker-option" onclick="selectSticker('🦊')" title="Fox">🦊</div>
                    <div class="sticker-option" onclick="selectSticker('🐻')" title="Bear">🐻</div>
                    <div class="sticker-option" onclick="selectSticker('🐭')" title="Mouse">🐭</div>
                    <div class="sticker-option" onclick="selectSticker('🦔')" title="Hedgehog">🦔</div>
                    <div class="sticker-option" onclick="selectSticker('🐸')" title="Frog">🐸</div>
                    <div class="sticker-option" onclick="selectSticker('🐝')" title="Bee">🐝</div>
                    <div class="sticker-option" onclick="selectSticker('🦋')" title="Butterfly">🦋</div>
                    <div class="sticker-option" onclick="selectSticker('🌸')" title="Flower">🌸</div>
                </div>
            </div>
            
            <div class="control-group">
                <h3>🖌️ Brush Size</h3>
                <div class="brush-sizes">
                    <button class="brush-option" onclick="selectBrush(2)">Tiny</button>
                    <button class="brush-option selected" onclick="selectBrush(5)">Small</button>
                    <button class="brush-option" onclick="selectBrush(10)">Medium</button>
                    <button class="brush-option" onclick="selectBrush(20)">Big</button>
                    <button class="brush-option" onclick="selectBrush(40)">HUGE</button>
                </div>
            </div>


            <div class="control-group">
                <h3>🧽 Magic Tools</h3>
                <div class="brush-sizes">
                    <button class="brush-option" id="eraserBtn" onclick="toggleEraser()">🧽 Eraser</button>
                    <button class="brush-option" onclick="clearCanvas()">🗑️ Clear All</button>
                    <button class="brush-option" onclick="blendColors()">🌈 Blend Colors</button>
                    <button class="brush-option" onclick="saveDrawing()">💾 Save Drawing</button>
                    <button class="brush-option" onclick="showGallery()">🖼️ My Drawings</button>
                </div>
                <div class="eating-control">
                    <button class="brush-option" id="animalEatingBtn" onclick="toggleAnimalEating()">🍽️ Animals: ON</button>
                </div>
            </div>

            <div class="control-group">
                <h3>📋 Instructions</h3>
                <div style="font-size: 0.9em; color: #666; text-align: center; line-height: 1.4;">
                    🐭 Draw <strong>GRAY</strong> mice, click them to make alive!<br>
                    🥕 Draw <strong>ORANGE</strong> carrots for bunnies!<br>
                    🎋 Draw <strong>GREEN</strong> bamboo for pandas!<br>
                    🍽️ Use the Animals button to turn eating ON/OFF!
                </div>
            </div>
        </div>

        <!-- Canvas Area -->
        <div class="canvas-area">
            <div class="canvas-container">
                <!-- SUPER CUTE INTERACTIVE ANIMALS ALL AROUND THE CANVAS! 🥰🐾 -->
                
                <!-- TOP ROW OF ANIMALS -->
                <div class="cute-canvas-animal kitten-friend" onclick="kittenMeow()" style="position: absolute; top: -40px; left: 10px; z-index: 20;">🐱</div>
                <div class="cute-canvas-animal puppy-friend" onclick="puppyBark()" style="position: absolute; top: -40px; left: 60px; z-index: 20;">🐶</div>
                <div class="cute-canvas-animal bunny-friend" onclick="bunnyHop()" style="position: absolute; top: -40px; left: 110px; z-index: 20;">🐰</div>
                <div class="cute-canvas-animal panda-friend" onclick="pandaEat()" style="position: absolute; top: -40px; left: 160px; z-index: 20;">🐼</div>
                <div class="cute-canvas-animal kitten-friend" onclick="kittenMeow()" style="position: absolute; top: -40px; left: 210px; z-index: 20;">🐱</div>
                <div class="cute-canvas-animal puppy-friend" onclick="puppyBark()" style="position: absolute; top: -40px; left: 260px; z-index: 20;">🐶</div>
                <div class="cute-canvas-animal bunny-friend" onclick="bunnyHop()" style="position: absolute; top: -40px; left: 310px; z-index: 20;">🐰</div>
                <div class="cute-canvas-animal panda-friend" onclick="pandaEat()" style="position: absolute; top: -40px; left: 360px; z-index: 20;">🐼</div>
                <div class="cute-canvas-animal kitten-friend" onclick="kittenMeow()" style="position: absolute; top: -40px; left: 410px; z-index: 20;">🐱</div>
                <div class="cute-canvas-animal puppy-friend" onclick="puppyBark()" style="position: absolute; top: -40px; left: 460px; z-index: 20;">🐶</div>
                <div class="cute-canvas-animal bunny-friend" onclick="bunnyHop()" style="position: absolute; top: -40px; left: 510px; z-index: 20;">🐰</div>
                <div class="cute-canvas-animal panda-friend" onclick="pandaEat()" style="position: absolute; top: -40px; left: 560px; z-index: 20;">🐼</div>
                
                <!-- LEFT SIDE ANIMALS -->
                <div class="cute-canvas-animal kitten-friend" onclick="kittenMeow()" style="position: absolute; top: 10px; left: -40px; z-index: 20;">🐱</div>
                <div class="cute-canvas-animal puppy-friend" onclick="puppyBark()" style="position: absolute; top: 60px; left: -40px; z-index: 20;">🐶</div>
                <div class="cute-canvas-animal bunny-friend" onclick="bunnyHop()" style="position: absolute; top: 110px; left: -40px; z-index: 20;">🐰</div>
                <div class="cute-canvas-animal panda-friend" onclick="pandaEat()" style="position: absolute; top: 160px; left: -40px; z-index: 20;">🐼</div>
                <div class="cute-canvas-animal kitten-friend" onclick="kittenMeow()" style="position: absolute; top: 210px; left: -40px; z-index: 20;">🐱</div>
                <div class="cute-canvas-animal puppy-friend" onclick="puppyBark()" style="position: absolute; top: 260px; left: -40px; z-index: 20;">🐶</div>
                <div class="cute-canvas-animal bunny-friend" onclick="bunnyHop()" style="position: absolute; top: 310px; left: -40px; z-index: 20;">🐰</div>
                
                <!-- RIGHT SIDE ANIMALS -->
                <div class="cute-canvas-animal panda-friend" onclick="pandaEat()" style="position: absolute; top: 10px; right: -40px; z-index: 20;">🐼</div>
                <div class="cute-canvas-animal kitten-friend" onclick="kittenMeow()" style="position: absolute; top: 60px; right: -40px; z-index: 20;">🐱</div>
                <div class="cute-canvas-animal puppy-friend" onclick="puppyBark()" style="position: absolute; top: 110px; right: -40px; z-index: 20;">🐶</div>
                <div class="cute-canvas-animal bunny-friend" onclick="bunnyHop()" style="position: absolute; top: 160px; right: -40px; z-index: 20;">🐰</div>
                <div class="cute-canvas-animal panda-friend" onclick="pandaEat()" style="position: absolute; top: 210px; right: -40px; z-index: 20;">🐼</div>
                <div class="cute-canvas-animal kitten-friend" onclick="kittenMeow()" style="position: absolute; top: 260px; right: -40px; z-index: 20;">🐱</div>
                <div class="cute-canvas-animal puppy-friend" onclick="puppyBark()" style="position: absolute; top: 310px; right: -40px; z-index: 20;">🐶</div>
                
                <!-- BOTTOM ROW OF ANIMALS -->
                <div class="cute-canvas-animal bunny-friend" onclick="bunnyHop()" style="position: absolute; bottom: -40px; left: 10px; z-index: 20;">🐰</div>
                <div class="cute-canvas-animal panda-friend" onclick="pandaEat()" style="position: absolute; bottom: -40px; left: 60px; z-index: 20;">🐼</div>
                <div class="cute-canvas-animal kitten-friend" onclick="kittenMeow()" style="position: absolute; bottom: -40px; left: 110px; z-index: 20;">🐱</div>
                <div class="cute-canvas-animal puppy-friend" onclick="puppyBark()" style="position: absolute; bottom: -40px; left: 160px; z-index: 20;">🐶</div>
                <div class="cute-canvas-animal bunny-friend" onclick="bunnyHop()" style="position: absolute; bottom: -40px; left: 210px; z-index: 20;">🐰</div>
                <div class="cute-canvas-animal panda-friend" onclick="pandaEat()" style="position: absolute; bottom: -40px; left: 260px; z-index: 20;">🐼</div>
                <div class="cute-canvas-animal kitten-friend" onclick="kittenMeow()" style="position: absolute; bottom: -40px; left: 310px; z-index: 20;">🐱</div>
                <div class="cute-canvas-animal puppy-friend" onclick="puppyBark()" style="position: absolute; bottom: -40px; left: 360px; z-index: 20;">🐶</div>
                <div class="cute-canvas-animal bunny-friend" onclick="bunnyHop()" style="position: absolute; bottom: -40px; left: 410px; z-index: 20;">🐰</div>
                <div class="cute-canvas-animal panda-friend" onclick="pandaEat()" style="position: absolute; bottom: -40px; left: 460px; z-index: 20;">🐼</div>
                <div class="cute-canvas-animal kitten-friend" onclick="kittenMeow()" style="position: absolute; bottom: -40px; left: 510px; z-index: 20;">🐱</div>
                <div class="cute-canvas-animal puppy-friend" onclick="puppyBark()" style="position: absolute; bottom: -40px; left: 560px; z-index: 20;">🐶</div>

                <canvas id="drawingCanvas" width="600" height="400"></canvas>
            </div>
        </div>
    </div>

    <!-- Message bubble for animal greetings -->
    <div class="message-bubble" id="messageBubble"></div>

    <!-- Save Drawing Popup -->
    <div class="save-popup" id="savePopup">
        <h3 style="color: #FF1493; text-align: center; margin-bottom: 20px;">💾 Save Your Amazing Drawing! 💾</h3>
        <div style="text-align: center;">
            <input type="text" class="save-input" id="drawingName" placeholder="Name your drawing!" maxlength="30">
            <br>
            <button class="brush-option" onclick="confirmSave()" style="margin: 10px;">✅ Save It!</button>
            <button class="brush-option" onclick="closeSavePopup()" style="margin: 10px; background: #ff6b6b;">❌ Cancel</button>
        </div>
    </div>

    <!-- Gallery Popup -->
    <div class="gallery-popup" id="galleryPopup">
        <button class="close-gallery" onclick="closeGallery()">✕</button>
        <div class="gallery-content">
            <div class="gallery-header">🖼️ Maria's Art Gallery! 🖼️</div>
            <div id="drawingsGrid" class="drawings-grid">
                <!-- Saved drawings will appear here -->
            </div>
            <div id="emptyGallery" style="text-align: center; color: #FF1493; font-size: 1.5em; margin-top: 50px;">
                🎨 No drawings yet! Create your first masterpiece! 🎨
            </div>
        </div>
    </div>

    <script>
        // Drawing variables
        let canvas = null;
        let ctx = null;
        let isDrawing = false;
        let currentColor = '#000';
        let currentBrushSize = 5;
        let eraserMode = false;
        let animalEatingEnabled = true;
        let stickerMode = false;
        let selectedSticker = null;

        // Initialize canvas
        window.onload = function() {
            initializeCanvas();
        };

        function initializeCanvas() {
            canvas = document.getElementById('drawingCanvas');
            ctx = canvas.getContext('2d');
            
            // Prevent scrolling and zooming on touch devices
            canvas.addEventListener('touchstart', function(e) { e.preventDefault(); });
            canvas.addEventListener('touchmove', function(e) { e.preventDefault(); });
            canvas.addEventListener('touchend', function(e) { e.preventDefault(); });
            
            // Mouse events for computers
            canvas.addEventListener('mousedown', startDrawingOnCanvas);
            canvas.addEventListener('mousemove', drawOnCanvas);
            canvas.addEventListener('mouseup', stopDrawing);
            canvas.addEventListener('mouseout', stopDrawing);
            canvas.addEventListener('click', checkClickOnDrawing);
            
            // Touch events for tablets and phones
            canvas.addEventListener('touchstart', startTouchDrawing);
            canvas.addEventListener('touchmove', drawTouch);
            canvas.addEventListener('touchend', stopDrawing);
        }

        function startDrawingOnCanvas(e) {
            const rect = canvas.getBoundingClientRect();
            const x = e.clientX - rect.left;
            const y = e.clientY - rect.top;
            
            // If in sticker mode, place sticker instead of drawing
            if (stickerMode && selectedSticker) {
                placeSticker(x, y);
                return;
            }
            
            isDrawing = true;
            ctx.beginPath();
            ctx.moveTo(x, y);
        }

        function drawOnCanvas(e) {
            if (!isDrawing) return;
            const rect = canvas.getBoundingClientRect();
            const x = e.clientX - rect.left;
            const y = e.clientY - rect.top;
            ctx.lineWidth = currentBrushSize;
            ctx.lineCap = 'round';
            ctx.strokeStyle = currentColor;
            ctx.lineTo(x, y);
            ctx.stroke();
            ctx.beginPath();
            ctx.moveTo(x, y);
        }

        function stopDrawing() {
            if (isDrawing) {
                isDrawing = false;
                ctx.beginPath();
                // Check for automatic eating after drawing
                setTimeout(() => {
                    checkForAutomaticEating();
                }, 800);
            }
        }

        // Touch functions for iPad and phones
        function startTouchDrawing(e) {
            e.preventDefault();
            const touch = e.touches[0];
            const rect = canvas.getBoundingClientRect();
            const x = touch.clientX - rect.left;
            const y = touch.clientY - rect.top;
            
            // If in sticker mode, place sticker instead of drawing
            if (stickerMode && selectedSticker) {
                placeSticker(x, y);
                return;
            }
            
            isDrawing = true;
            ctx.beginPath();
            ctx.moveTo(x, y);
        }

        function drawTouch(e) {
            if (!isDrawing) return;
            e.preventDefault();
            
            const touch = e.touches[0];
            const rect = canvas.getBoundingClientRect();
            const x = touch.clientX - rect.left;
            const y = touch.clientY - rect.top;
            
            ctx.lineWidth = currentBrushSize;
            ctx.lineCap = 'round';
            ctx.strokeStyle = currentColor;
            ctx.lineTo(x, y);
            ctx.stroke();
            ctx.beginPath();
            ctx.moveTo(x, y);
        }

        // Animal eating system - TURNED OFF!
        function checkForAutomaticEating() {
            // No automatic eating of drawings!
            return;
        }

        // Mouse clicking system - MAKE YOUR DRAWINGS ALIVE!
        function checkClickOnDrawing(e) {
            if (isDrawing) return;
            
            // Only make mice alive if animal eating is ON
            if (!animalEatingEnabled) return;
            
            const rect = canvas.getBoundingClientRect();
            const clickX = e.clientX - rect.left;
            const clickY = e.clientY - rect.top;
            
            const mouseNearClick = findMouseNearClick(clickX, clickY);
            if (mouseNearClick.found) {
                showMessage('🐭 Making your mouse alive! ✨');
                setTimeout(() => {
                    makeMouseAlive(mouseNearClick);
                }, 500);
            }
        }

        // Find functions
        function findCarrots() {
            const imageData = ctx.getImageData(0, 0, canvas.width, canvas.height);
            const data = imageData.data;
            let carrotPixels = [];
            
            for (let i = 0; i < data.length; i += 4) {
                const red = data[i];
                const green = data[i + 1];
                const blue = data[i + 2];
                const alpha = data[i + 3];
                
                if (alpha > 0 && red > 150 && green > 80 && green < 150 && blue < 100) {
                    const x = (i / 4) % canvas.width;
                    const y = Math.floor((i / 4) / canvas.width);
                    carrotPixels.push({x, y, index: i});
                }
            }
            
            return {found: carrotPixels.length > 10, pixels: carrotPixels};
        }

        function findPureBamboo() {
            const imageData = ctx.getImageData(0, 0, canvas.width, canvas.height);
            const data = imageData.data;
            let bambooPixels = [];
            let orangePixels = [];
            
            // Find orange pixels first
            for (let i = 0; i < data.length; i += 4) {
                const red = data[i];
                const green = data[i + 1];
                const blue = data[i + 2];
                const alpha = data[i + 3];
                
                if (alpha > 0 && red > 150 && green > 80 && green < 150 && blue < 100) {
                    const x = (i / 4) % canvas.width;
                    const y = Math.floor((i / 4) / canvas.width);
                    orangePixels.push({x, y});
                }
            }
            
            // Find green pixels far from carrots
            for (let i = 0; i < data.length; i += 4) {
                const red = data[i];
                const green = data[i + 1];
                const blue = data[i + 2];
                const alpha = data[i + 3];
                
                if (alpha > 0 && green > red && green > blue && green > 100) {
                    const x = (i / 4) % canvas.width;
                    const y = Math.floor((i / 4) / canvas.width);
                    
                    const farFromCarrots = orangePixels.every(orangePixel => {
                        const distance = Math.sqrt((x - orangePixel.x) ** 2 + (y - orangePixel.y) ** 2);
                        return distance > 50;
                    });
                    
                    if (farFromCarrots) {
                        bambooPixels.push({x, y, index: i});
                    }
                }
            }
            
            return {found: bambooPixels.length > 20, pixels: bambooPixels};
        }

        function findMouseNearClick(clickX, clickY) {
            const checkRadius = 30;
            let mousePixels = [];
            
            for (let x = clickX - checkRadius; x <= clickX + checkRadius; x++) {
                for (let y = clickY - checkRadius; y <= clickY + checkRadius; y++) {
                    if (x >= 0 && x < canvas.width && y >= 0 && y < canvas.height) {
                        const imageData = ctx.getImageData(x, y, 1, 1);
                        const data = imageData.data;
                        const red = data[0];
                        const green = data[1];
                        const blue = data[2];
                        const alpha = data[3];
                        
                        if (alpha > 0 && Math.abs(red - green) < 30 && Math.abs(green - blue) < 30 && 
                            red > 100 && red < 200) {
                            mousePixels.push({x: x, y: y, index: (y * canvas.width + x) * 4});
                        }
                    }
                }
            }
            
            return {found: mousePixels.length > 20, pixels: mousePixels};
        }

        // Eating functions
        function eatCarrots(carrots) {
            const imageData = ctx.getImageData(0, 0, canvas.width, canvas.height);
            const data = imageData.data;
            
            carrots.pixels.forEach(pixel => {
                data[pixel.index + 3] = 0;
            });
            
            // Also eat nearby green parts (carrot leaves)
            for (let i = 0; i < data.length; i += 4) {
                const red = data[i];
                const green = data[i + 1];
                const blue = data[i + 2];
                const alpha = data[i + 3];
                
                if (alpha > 0 && green > red && green > blue && green > 100) {
                    const x = (i / 4) % canvas.width;
                    const y = Math.floor((i / 4) / canvas.width);
                    
                    const nearCarrot = carrots.pixels.some(carrotPixel => {
                        const distance = Math.sqrt((x - carrotPixel.x) ** 2 + (y - carrotPixel.y) ** 2);
                        return distance < 50;
                    });
                    
                    if (nearCarrot) {
                        data[i + 3] = 0;
                    }
                }
            }
            
            ctx.putImageData(imageData, 0, 0);
        }

        function eatBamboo(bamboo) {
            const imageData = ctx.getImageData(0, 0, canvas.width, canvas.height);
            const data = imageData.data;
            
            bamboo.pixels.forEach(pixel => {
                data[pixel.index + 3] = 0;
            });
            
            ctx.putImageData(imageData, 0, 0);
        }

        function makeMouseAlive(mouseDrawing) {
            const imageData = ctx.getImageData(0, 0, canvas.width, canvas.height);
            const data = imageData.data;
            
            mouseDrawing.pixels.forEach(pixel => {
                data[pixel.index + 3] = 0;
            });
            ctx.putImageData(imageData, 0, 0);
            
            createLivingMouse();
        }

        function createLivingMouse() {
            if (document.getElementById('livingMouse')) return;
            
            const mouse = document.createElement('div');
            mouse.id = 'livingMouse';
            mouse.style.cssText = `
                position: absolute;
                width: 25px;
                height: 20px;
                background: #A9A9A9;
                border-radius: 50% 50% 50% 50% / 40% 40% 60% 60%;
                z-index: 15;
                cursor: pointer;
                left: ${Math.random() * 500 + 100}px;
                top: ${Math.random() * 300 + 100}px;
                transition: all 0.5s ease;
            `;
            mouse.innerHTML = `
                <div style="position: absolute; top: -3px; left: 2px; width: 8px; height: 8px; background: #A9A9A9; border-radius: 50%;"></div>
                <div style="position: absolute; top: -3px; right: 2px; width: 8px; height: 8px; background: #A9A9A9; border-radius: 50%;"></div>
                <div style="position: absolute; top: 8px; left: 20px; width: 15px; height: 2px; background: #A9A9A9; border-radius: 50%;"></div>
                <div style="position: absolute; top: 6px; left: 8px; width: 2px; height: 2px; background: #000; border-radius: 50%;"></div>
                <div style="position: absolute; top: 6px; right: 8px; width: 2px; height: 2px; background: #000; border-radius: 50%;"></div>
            `;
            
            mouse.onclick = () => {
                mouse.remove();
            };
            
            document.querySelector('.canvas-container').appendChild(mouse);
            startMouseMovement(mouse);
        }

        function startMouseMovement(mouse) {
            let moveInterval = setInterval(() => {
                if (!document.getElementById('livingMouse')) {
                    clearInterval(moveInterval);
                    return;
                }
                
                const newX = Math.random() * 500 + 50;
                const newY = Math.random() * 300 + 50;
                
                mouse.style.left = newX + 'px';
                mouse.style.top = newY + 'px';
                
                if (Math.random() < 0.3) {
                    const squeak = document.createElement('div');
                    squeak.textContent = '🐭 *squeak*';
                    squeak.style.cssText = `
                        position: absolute;
                        left: ${newX}px;
                        top: ${newY - 30}px;
                        font-size: 12px;
                        color: #666;
                        z-index: 20;
                        pointer-events: none;
                    `;
                    document.querySelector('.canvas-container').appendChild(squeak);
                    setTimeout(() => squeak.remove(), 1000);
                }
            }, 2000);
            
            setTimeout(() => {
                if (mouse.parentNode) {
                    mouse.remove();
                    clearInterval(moveInterval);
                }
            }, 15000);
        }

        // Animal click functions - NO MORE MESSAGES!
        function kittenMeow() {
            // Just cute animation, no message
        }

        function puppyBark() {
            // Just cute animation, no message
        }

        function bunnyHop() {
            // Just cute animation, no message
        }

        function pandaEat() {
            // Just cute animation, no message
        }

        // Control functions
        function selectColor(color) {
            currentColor = color;
            exitStickerMode(); // Exit sticker mode when selecting colors
            
            document.querySelectorAll('.color-option').forEach(option => {
                option.classList.remove('selected');
            });
            event.target.classList.add('selected');
        }

        function selectBrush(size) {
            currentBrushSize = size;
            document.querySelectorAll('.brush-option').forEach(option => {
                option.classList.remove('selected');
            });
            event.target.classList.add('selected');
        }

        // Sticker Functions
        function selectSticker(sticker) {
            selectedSticker = sticker;
            stickerMode = true;
            eraserMode = false;
            
            // Update sticker selection visual
            document.querySelectorAll('.sticker-option').forEach(option => {
                option.classList.remove('selected');
            });
            event.target.classList.add('selected');
            
            // Remove color selection
            document.querySelectorAll('.color-option').forEach(option => {
                option.classList.remove('selected');
            });
            
            // Update cursor and mode
            canvas.style.cursor = 'pointer';
            document.getElementById('eraserBtn').style.background = '#ff9a9e';
            document.getElementById('eraserBtn').textContent = '🧽 Eraser';
            
            showMessage(`🎨 Click on canvas to place ${sticker} sticker!`);
        }

        function placeSticker(x, y) {
            ctx.font = '30px Arial';
            ctx.textAlign = 'center';
            ctx.textBaseline = 'middle';
            ctx.fillText(selectedSticker, x, y);
            
            showMessage(`${selectedSticker} placed! Click another sticker or pick a color to draw!`);
        }

        function exitStickerMode() {
            stickerMode = false;
            selectedSticker = null;
            document.querySelectorAll('.sticker-option').forEach(option => {
                option.classList.remove('selected');
            });
            canvas.style.cursor = 'crosshair';
        }

        function toggleEraser() {
            const eraserBtn = document.getElementById('eraserBtn');
            
            if (eraserMode) {
                eraserMode = false;
                currentColor = '#000';
                eraserBtn.style.background = '#ff9a9e';
                eraserBtn.textContent = '🧽 Eraser';
                canvas.style.cursor = 'crosshair';
            } else {
                eraserMode = true;
                currentColor = '#FFFFFF';
                eraserBtn.style.background = '#ff1493';
                eraserBtn.textContent = '🧽 Eraser ON';
                canvas.style.cursor = 'grab';
            }
        }

        function clearCanvas() {
            ctx.clearRect(0, 0, canvas.width, canvas.height);
            showMessage('🗑️ Canvas cleared! Ready for new art!');
        }

        function blendColors() {
            showMessage('🌈 Blending your colors like magic watercolors! ✨');
            
            // Get the image data from the canvas
            const imageData = ctx.getImageData(0, 0, canvas.width, canvas.height);
            const data = imageData.data;
            
            // Apply blur effect to blend colors
            const blurredData = applyBlurEffect(data, canvas.width, canvas.height);
            
            // Put the blended image back
            const newImageData = ctx.createImageData(canvas.width, canvas.height);
            newImageData.data.set(blurredData);
            ctx.putImageData(newImageData, 0, 0);
            
            setTimeout(() => {
                showMessage('🎨 Colors blended beautifully! Like watercolor magic! 🌈');
            }, 1500);
        }

        function applyBlurEffect(data, width, height) {
            const newData = new Uint8ClampedArray(data);
            const blurRadius = 3;
            
            for (let y = blurRadius; y < height - blurRadius; y++) {
                for (let x = blurRadius; x < width - blurRadius; x++) {
                    const index = (y * width + x) * 4;
                    
                    // Skip transparent pixels
                    if (data[index + 3] === 0) continue;
                    
                    let totalR = 0, totalG = 0, totalB = 0, totalA = 0;
                    let count = 0;
                    
                    // Sample surrounding pixels
                    for (let dy = -blurRadius; dy <= blurRadius; dy++) {
                        for (let dx = -blurRadius; dx <= blurRadius; dx++) {
                            const sampleX = x + dx;
                            const sampleY = y + dy;
                            const sampleIndex = (sampleY * width + sampleX) * 4;
                            
                            if (data[sampleIndex + 3] > 0) { // Only blend with non-transparent pixels
                                totalR += data[sampleIndex];
                                totalG += data[sampleIndex + 1];
                                totalB += data[sampleIndex + 2];
                                totalA += data[sampleIndex + 3];
                                count++;
                            }
                        }
                    }
                    
                    if (count > 0) {
                        newData[index] = totalR / count;
                        newData[index + 1] = totalG / count;
                        newData[index + 2] = totalB / count;
                        newData[index + 3] = Math.min(255, totalA / count * 1.2); // Slightly increase opacity
                    }
                }
            }
            
            return newData;
        }

        function toggleAnimalEating() {
            const button = document.getElementById('animalEatingBtn');
            
            if (animalEatingEnabled) {
                animalEatingEnabled = false;
                button.style.background = '#ff6b6b';
                button.textContent = '🍽️ Animals: OFF';
                button.classList.add('off');
                showMessage('🐼 Animals stopped eating! Click button to turn ON!');
            } else {
                animalEatingEnabled = true;
                button.style.background = '#32CD32';
                button.textContent = '🍽️ Animals: ON';
                button.classList.remove('off');
                showMessage('🐰 Animals are hungry again! Draw food!');
            }
        }

        function showMessage(text) {
            const bubble = document.getElementById('messageBubble');
            bubble.textContent = text;
            bubble.style.display = 'block';
            
            setTimeout(() => {
                bubble.style.display = 'none';
            }, 3000);
        }

        // Save and Gallery Functions
        function saveDrawing() {
            document.getElementById('savePopup').style.display = 'block';
            document.getElementById('drawingName').value = '';
            document.getElementById('drawingName').focus();
        }

        function closeSavePopup() {
            document.getElementById('savePopup').style.display = 'none';
        }

        function confirmSave() {
            const nameInput = document.getElementById('drawingName');
            const drawingName = nameInput.value.trim();
            
            if (!drawingName) {
                alert('Please give your drawing a name! 🎨');
                return;
            }
            
            // Save the drawing to browser storage
            const drawingData = canvas.toDataURL();
            const timestamp = new Date().toLocaleDateString();
            
            let savedDrawings = JSON.parse(localStorage.getItem('mariaDrawings') || '[]');
            
            const newDrawing = {
                id: Date.now(),
                name: drawingName,
                data: drawingData,
                date: timestamp
            };
            
            savedDrawings.push(newDrawing);
            localStorage.setItem('mariaDrawings', JSON.stringify(savedDrawings));
            
            closeSavePopup();
            showMessage(`✅ "${drawingName}" saved to your gallery! 🎨`);
        }

        function showGallery() {
            const galleryPopup = document.getElementById('galleryPopup');
            const drawingsGrid = document.getElementById('drawingsGrid');
            const emptyMessage = document.getElementById('emptyGallery');
            
            const savedDrawings = JSON.parse(localStorage.getItem('mariaDrawings') || '[]');
            
            if (savedDrawings.length === 0) {
                drawingsGrid.innerHTML = '';
                emptyMessage.style.display = 'block';
            } else {
                emptyMessage.style.display = 'none';
                drawingsGrid.innerHTML = '';
                
                savedDrawings.forEach(drawing => {
                    const drawingDiv = document.createElement('div');
                    drawingDiv.className = 'drawing-item';
                    drawingDiv.innerHTML = `
                        <img src="${drawing.data}" alt="${drawing.name}">
                        <div class="drawing-title">${drawing.name}</div>
                        <div style="font-size: 0.9em; color: #666; margin-top: 5px;">${drawing.date}</div>
                        <button class="delete-drawing" onclick="deleteDrawing(${drawing.id})">🗑️ Delete</button>
                    `;
                    drawingsGrid.appendChild(drawingDiv);
                });
            }
            
            galleryPopup.style.display = 'block';
        }

        function closeGallery() {
            document.getElementById('galleryPopup').style.display = 'none';
        }

        function deleteDrawing(drawingId) {
            if (confirm('Are you sure you want to delete this drawing? 🗑️')) {
                let savedDrawings = JSON.parse(localStorage.getItem('mariaDrawings') || '[]');
                savedDrawings = savedDrawings.filter(drawing => drawing.id !== drawingId);
                localStorage.setItem('mariaDrawings', JSON.stringify(savedDrawings));
                showGallery(); // Refresh the gallery
                showMessage('🗑️ Drawing deleted!');
            }
        }

        // Close popups when clicking outside
        window.onclick = function(event) {
            const savePopup = document.getElementById('savePopup');
            const galleryPopup = document.getElementById('galleryPopup');
            
            if (event.target === galleryPopup) {
                closeGallery();
            }
        }
    </script>
</body>
</html> 